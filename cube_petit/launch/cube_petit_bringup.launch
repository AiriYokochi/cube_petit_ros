<?xml version="1.0"?>
<launch>
  <!-- load cube_petit.xacro -->
  <arg name="model" default="$(find cube_petit)/urdf/cube_petit.xacro" />
  <param name="robot_description" command="$(find xacro)/xacro $(arg model)"/>

  <!-- launch teleop, dynamixel motor, pacecat lidar -->
  <include file="$(find cube_petit)/launch/teleop_cube_petit.launch"/>
  <include file="$(find cube_petit)/launch/motor_bringup.launch"/>
  <include file="$(find cube_petit)/launch/lidar_bringup.launch"/>

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

  <!-- laser filter node ( cut data of cube-petit's pole) -->
  <node pkg="laser_filters" type="scan_to_scan_filter_chain" name="cube_petit_pacecat_filter" ns="/pacecat">
    <remap from="scan" to="scan" />
    <remap from="scan_filtered" to="scan_filtered"/>
    <rosparam command="load" file="$(find cube_petit)/sensors/cube_petit_pacecat_filter.yaml" />
  </node>
</launch>

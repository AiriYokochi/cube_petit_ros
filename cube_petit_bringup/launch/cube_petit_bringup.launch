<?xml version="1.0"?>
<launch>
  <!-- load cube_petit.xacro -->
  <arg name="model" default="$(find cube_petit_description)/urdf/cube_petit.xacro" />
  <param name="robot_description" command="$(find xacro)/xacro $(arg model)"/>

  <!-- launch teleop, dynamixel motor, pacecat lidar -->
  <include file="$(find cube_petit_bringup)/launch/teleop_cube_petit.launch"/>

  <group ns="cube_petit">
    <include file="$(find cube_petit_hardware_interface)/launch/motor_bringup.launch"/>
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
  </group>

  <!-- laser filter node ( cut data of cube-petit's pole) -->
  <group ns="/pacecat">
    <include file="$(find cube_petit_bringup)/launch/lidar_bringup.launch"/>
    <node pkg="laser_filters" type="scan_to_scan_filter_chain" name="cube_petit_pacecat_filter">
      <!-- <remap from="scan" to="scan" /> -->
      <!-- <remap from="scan_filtered" to="scan_filtered"/> -->
      <!-- v1 -->
      <!-- <rosparam command="load" file="$(find cube_petit_bringup)/config/sensors/cube_petit_pacecat_filter.yaml" /> -->
      <!-- v2 -->
      <rosparam command="load" file="$(find cube_petit_bringup)/config/sensors/cube_petit_pacecat_filter2.yaml" />
    </node>
  </group>
 
  <include file="$(find cube_petit_bringup)/launch/realsense_rgbd.launch"/>

</launch>
